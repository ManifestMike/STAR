@model IEnumerable<STAR.Domain.Contractor>
<h2>Dashboard</h2>

@section scripts {
<script type="text/javascript">
    @*   //Jquery auto complete widget 
    $(function (){
        $("#txtSearch").autocomplete({
            source: '@Url.Action("GetSkills")'
        });
    });*@

    $(function () {

        function split(val) {
            return val.split(/,\s*/);
        }
        function extractLast(term) {
            return split(term).pop();
        }
        $.get('@Url.Action("GetSkills")')
            .done(function (skills) {

                  $("#txtSearch")
      // don't navigate away from the field on tab when selecting an item
      .on("keydown", function (event) {
          if (event.keyCode === $.ui.keyCode.TAB &&
              $(this).autocomplete("instance").menu.active) {
              event.preventDefault();
          }
      })
      .autocomplete({
          minLength: 0,
          source: function (request, response) {
              // delegate back to autocomplete, but extract the last term
              response($.ui.autocomplete.filter(
                skills, extractLast(request.term)));
          },
          focus: function () {
              // prevent value inserted on focus
              return false;
          },
          select: function (event, ui) {
              var terms = split(this.value);
              // remove the current input
              terms.pop();
              // add the selected item
              terms.push(ui.item.value);
              // add placeholder to get the comma-and-space at the end
              terms.push("");
              this.value = terms.join(", ");
              return false;
          }
      });
              });
            });
    
</script>
}

@using (Html.BeginForm()) {
    <label>Skills: </label> @Html.TextBox("searchTerm", null, new { id = "txtSearch" })
    @Html.Hidden("skillId", null);

}

@if(Model != null){
    @Html.Partial("ContractorListPartial", Model)
}